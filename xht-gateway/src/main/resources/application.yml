# gateway路由配置
spring:
  cloud:
    gateway:
      routes:
        - id: xht-auth
          uri: lb://xht-auth #此处需要使用lb协议
          predicates:
            - Path=/auth/**
          filters:
            - StripPrefix=1
        - id: xht-system
          uri: lb://xht-system #此处需要使用lb协议
          predicates:
            - Path=/admin/**
          filters:
            - StripPrefix=1
        - id: xht-system
          uri: lb://xht-generate #此处需要使用lb协议
          predicates:
            - Path=/generate/**
          filters:
            - StripPrefix=1
      server:
        webflux:
          discovery:
            locator:
              lower-case-service-id: true
              enabled: true
    nacos:
      config:
        import-check:
          enabled: false
knife4j:
  gateway:
    enabled: true     # ① 第一个配置，开启gateway聚合组件
    strategy: discover # ② 第二行配置，设置聚合模式采用discover服务发现的模式
    discover:
      enabled: true   # ③ 第三行配置，开启discover模式
      version: openapi3 # ④ 第四行配置，聚合子服务全部为Swagger2规范的文档