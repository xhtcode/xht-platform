<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xht.system.modules.user.dao.mapper.SysUserPostMapper">

    <resultMap id="BaseResultMap" type="com.xht.system.modules.dept.domain.response.SysPostResponse">
        <id property="id" column="t2_id"/>
        <result property="postStatus" column="t1_post_status"/>
        <result property="postCode" column="t2_post_code"/>
        <result property="postName" column="t2_post_name"/>
        <result property="postSort" column="t2_post_sort"/>
        <result property="remark" column="t2_remark"/>
        <result property="createTime" column="t2_create_time"/>
        <result property="createBy" column="t2_create_by"/>
        <result property="updateTime" column="t2_update_time"/>
        <result property="updateBy" column="t2_update_by"/>
    </resultMap>

    <select id="getPostByUserId" resultMap="BaseResultMap">
        SELECT t1.position_nature as t1_position_nature,
               t2.id              as t2_id,
               t2.dept_id         as t2_dept_id,
               t2.post_code       as t2_post_code,
               t2.post_name       as t2_post_name,
               t2.post_sort       as t2_post_sort,
               t2.post_status     as t2_post_status,
               t2.post_limit      as t2_post_limit,
               t2.post_have       as t2_post_have,
               t2.system_flag     as t2_system_flag,
               t2.remark          as t2_remark,
               t2.create_time     as t2_create_time,
               t2.create_by       as t2_create_by,
               t2.update_time     as t2_update_time,
               t2.update_by       as t2_update_by
        FROM sys_user_post t1
                 LEFT JOIN sys_post t2 ON t2.id = t1.post_id
        WHERE t2.del_flag = 0
          and t1.user_id = #{userId}
    </select>
</mapper>
